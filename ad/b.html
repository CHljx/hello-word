<!--
	NOTES:
	1. All tokens are represented by '$' sign in the template.
	2. You can write your code only wherever mentioned.
	3. All occurrences of existing tokens will be replaced by their appropriate values.
	4. Blank lines will be removed automatically.
	5. Remove unnecessary comments before creating your template.
-->
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="authoring-tool" content="Adobe_Animate_CC">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no;"/>
	<title>b</title>
	<style>
		/**
        * body
        * overflow:hidden 解决素材图片加载时图片body高度一直发生变化问题
        **/
		body {
			padding: 0px;
			margin: 0px;
			background-color: #000;
			overflow: hidden;
			text-align: left;
			max-width:100%;
		}

		/**
        * 舞台
        **/
		.stage {
			position: relative;
			margin: 0 auto;
			padding: 0px;
			max-width:100%;
		}

		/**
        * 文本框
        * IE9 情况下background：transparetn导致文本框不可用，设置IE9Hack
        **/
		.input-control {
			display: none;
			position: absolute;
			z-index: 1;
			margin: 0px;
			padding: 0px 5px;
			border: none;
			outline: none;
			background: transparent;
			background: #fff \0;
		}

		/**
        * 提示文字
        **/
		.notice-control {
			display: none;
			position: absolute;
			z-index: 1;
		}

		.agreeWrap {
			display: none;
			position: absolute;
			z-index: 1;
		}

		.agreeWrap span, .agreeWrap input {
			vertical-align: middle;;
		}

		#play {
			display: none;
		}


	</style>
	<script src="https://code.jquery.com/jquery-git.js"></script>
	<!-- write your code here -->
	<script src="libs/createjs-2015.11.26.min.js"></script>
	<script src="b.js"></script>
	<script>
        var canvas, stage, exportRoot;
        var aHideInter = [];
        var scale=1;
        function init() {
            canvas = document.getElementById("canvas");
            images = images || {};
            var loader = new createjs.LoadQueue(false);
            loader.addEventListener("fileload", handleFileLoad);
            loader.addEventListener("complete", handleComplete);
            loader.loadManifest(lib.properties.manifest);
        }
        function handleFileLoad(evt) {
            if (evt.item.type == "image") {
                images[evt.item.id] = evt.result;
            }
        }
        function handleComplete(evt) {
            //This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
			alert($("#Stage").width())
            var queue = evt.target;
            var ssMetadata = lib.ssMetadata;
            for (i = 0; i < ssMetadata.length; i++) {
                ss[ssMetadata[i].name] = new createjs.SpriteSheet({
                    "images": [queue.getResult(ssMetadata[i].name)],
                    "frames": ssMetadata[i].frames
                })
            }
            exportRoot = new lib.b();
            stage = new createjs.Stage(canvas);
            stage.addChild(exportRoot);
            stage.enableMouseOver();
            //Registers the "tick" event listener.
            createjs.Ticker.setFPS(lib.properties.fps);
            createjs.Ticker.addEventListener("tick", stage);
            //Code to support hidpi screens and responsive scaling.
            (function (isResp, respDim, isScale, scaleType) {
                var lastW, lastH, lastS = 1;
                //window.addEventListener('resize', resizeCanvas);
                resizeCanvas();
                function resizeCanvas() {
                    var w = lib.properties.width, h = lib.properties.height;
                    var iw = window.innerWidth, ih = window.innerHeight;
                    var pRatio = window.devicePixelRatio, xRatio = iw / w, yRatio = ih / h, sRatio = 1;
                    scaleX=xRatio;
                    scaleY=yRatio;
                    if (isResp) {
                        if ((respDim == 'width' && lastW == iw) || (respDim == 'height' && lastH == ih)) {
                            sRatio = lastS;
                        }
                        else if (!isScale) {
                            if (iw < w || ih < h)
                                sRatio = Math.min(xRatio, yRatio);
                        }
                        else if (scaleType == 1) {
                            sRatio = Math.min(xRatio, yRatio);
                        }
                        else if (scaleType == 2) {
                            sRatio = Math.max(xRatio, yRatio);
                        }
                    }
                    canvas.width = w * pRatio * sRatio;
                    canvas.height = h * pRatio * sRatio;
                    canvas.style.width = w * sRatio + 'px';
                    canvas.style.height = h * sRatio + 'px';
                    stage.scaleX = pRatio * sRatio;
                    stage.scaleY = pRatio * sRatio;
                    scale=sRatio;
//                    scale=pRatio * sRatio;
                    lastW = iw;
                    lastH = ih;
                    lastS = sRatio;
                }
            })(true, 'both', true, 1);
        }
        /**
         * 文本框定位
         * @param sId 文本框Id
         * @param oCssObj 定位信息
         */
        window.setInputCss = function (sId, oCssObj) {
            var input = document.getElementById(sId);
            input.style.left = oCssObj.x*scale + "px";
            input.style.top = oCssObj.y *scale+ "px";
            input.style.width = (oCssObj.width - 10)*scale + "px";
            input.style.height = oCssObj.height*scale  + "px";
            input.style.lineHeight = oCssObj.height + "px";
            if (!document.createElement("canvas").getContext) {
                input.style.background = "#fff";
            }
            input.style.display = "block";
            if (sId == "uname") {
                input.style.color = oCssObj.color;
            }
        };
        /**
         * 提示文字定位
         * @param sId
         * @param oCssObj
         */
        window.setNoticeCss = function (sId, oCssObj) {
            var input = document.getElementById(sId);
            input.style.left = oCssObj.x*scale + "px";
            input.style.top = oCssObj.y *scale+ "px";
            input.style.display = "block";
            input.style.color = oCssObj.color;
            input.style.font = oCssObj.font;
        };
        /**
         * 设置同意协议Check触发
         * @param status
         */
        window.setAgreeCheck = function (status) {
            document.getElementById("#agreeCheck").click();
        };
        /**
         * 触发开始游戏按钮
         */
        window.setPlayClick = function () {
            alert("开始游戏")
        };
        /**
         * 根据类名触发相应的串接口按钮
         */
        window.setInterClick = function (className) {
            alert("串接口(" + className + ")触发");
        };
        window.showTj = function () {
        };
        window.openDiv = function () {
        }
	</script>
	<!-- write your code here -->
</head>
<body onload="init();" style="margin:0px;">
<div id="Stage" class="stage" style="">
	<!--Canvas 画布-->
	<canvas id="canvas" style="display: block; ">
	</canvas>
	<!--登录窗口-->
	<div>
		<input type="text" id="uname" class="input-control"/>
		<span id="unameNotice" class="notice-control">建議使用常用信箱註冊</span>
		<input type="password" id="password" class="input-control"/>
		<span id="passwordNotice" class="notice-control">請輸入6-16個字元</span>
		<input type="password" id="confirmPassword" class="input-control"/>
		<span id="confirmPasswordNotice" class="notice-control">請再次確認密碼</span>
		<button id="play" onclick="setPlayClick();">登录</button>
	</div>
</div>
</body>
</html>