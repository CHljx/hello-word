<!doctype html>
<html>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1,user-scalable=no"/> <title>首页</title>
<script>!function(e,t){var n,d=0,i=document.createElement("style");window.document.getElementsByTagName("head")[0].appendChild(i),(n=window.document.createElement("div")).style.width="1rem",n.style.display="none",window.document.getElementsByTagName("head")[0].appendChild(n),d=parseFloat(window.getComputedStyle(n,null).getPropertyValue("width")),n.remove();var o=e.documentElement,a="orientationchange"in window?"orientationchange":"resize",l=function(){var e=o.clientWidth;e&&(o.style.fontSize=e/750*100/d*100+"%")};e.addEventListener&&(t.addEventListener(a,l,!1),l())}(document,window)</script>
<style>
textarea{    display: block;
    font: .24rem/.3rem Microsoft Yahei;
    width: 100%;
    background: no-repeat;
    height: 100%;
    min-height: 1.38rem;    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR…h+qW0GR9UyoB7g3AvqZ9zlOlFuJCSki3ZAO6Ad0A78UQd+AIRU5apNAJ2aAAAAAElFTkSuQmCC) no-repeat 100%;
    background-size: .4rem;
    resize: none;
    padding-right: .6rem;
    box-sizing: border-box;}
	html,body{padding:0;margin:0;}
	body{font-size:.20rem}

#mask{
	position:fixed;
	left:0;
	right:0;
	bottom:0;
	height:50%;
	display:none;
	background:#000;
}
</style>
</head> 
<body> 
<div id=app>  
	<p>textarea1</p>
	<textarea data-id=1></textarea>
	<p>textarea2</p>
	<textarea data-id=2></textarea>
	<p>textarea3</p>
	<textarea data-id=3></textarea>
	<p>textarea4</p>
	<textarea data-id=4></textarea>
	<p>textarea5</p>
	<textarea data-id=5></textarea>
	<p>textarea6</p>
	<textarea data-id=6></textarea>
	<p>textarea7</p>
	<textarea data-id=7></textarea>
	<p>textarea8</p>
	<textarea data-id=8></textarea>
	<p>textarea9</p>
	<textarea data-id=9></textarea>
	<p>textarea10</p>
	<textarea data-id=10></textarea>
	<p>textarea11</p>
	<textarea data-id=11></textarea>
	<p>textarea12</p>
	<textarea data-id=12></textarea>
	<p>textarea13</p>
	<textarea data-id=13></textarea>
	<p>textarea14</p>
	<textarea data-id=14></textarea>
</div>
<div id="mask"></div>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
<script>
	
	
	var timer=null;
	alert("4")
	function isIphone(){
		if(navigator.userAgent.match(/(iphone|ipad)/gi)){return false};
		return true;
	}
	

	var originalHeight=document.documentElement.clientHeight ||document.body.clientHeight;

	$("textarea").on("focus",function(){
		var ele=this;
		$(ele).val("testarea:"+$(ele).attr("data-id"))
		focusScroll(ele);
		clearTimeout(timer)
	}).on("blur",function(){
		timer=setTimeout(function(){
		blurReset();},500);
	}).on("input",function(){
		var ele=this;
	})

	function scrollToView(offsetTop){
		
	}

	function focusScroll(ele){

		if(isIphone()){
			
			var doc=document.body;
			var offsetTop=ele.offsetTop;
			var offsetHeight=ele.offsetHeight;
			$("body").css("paddingBottom",doc.clientHeight/2+"px");
			
			if(offsetTop+offsetHeight>=doc.scrollTop+doc.clientHeight/2){
				doc.scrollTop+=(offsetTop+ele.offsetHeight-(doc.scrollTop+doc.clientHeight/2));
			}
		}
	}

	function blurReset(){
		if(isIphone){
			var doc=document.documentElement;
			$("body").css("paddingBottom","0");
			
		}
	}
</script>
</body>
</html> 