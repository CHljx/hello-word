<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=0.5,maximum-scale=2,user-scalable=no"><meta name="screen-orientation" content="portrait"><meta name="x5-orientation" content="portrait"><meta name="format-detection" content="telphone=no,email=no"><title>新战略统计</title><script>var defaultFontSize=0;function getDefaultFS(){var e=window.document.createElement("div");e.style.width="1rem",e.style.display="none",window.document.getElementsByTagName("head")[0].appendChild(e),defaultFontSize=parseFloat(window.getComputedStyle(e,null).getPropertyValue("width")),e.remove()}function adapt(e,t){if(!navigator.userAgent.match(/(iphone|ipad|android)/gi))return document.documentElement.style.fontSize="50px",void(document.documentElement.style.background="#000");0==window.orientation||180==window.orientation?document.documentElement.classList.remove("hori"):document.documentElement.classList.add("hori");var n=window.document.getElementsByTagName("head")[0];document.documentElement.style.fontSize=window.innerWidth/e*t/defaultFontSize*100+"%";var i=document.createElement("style"),d="@media screen and (min-width: "+window.innerWidth+"px) {html{font-size:"+window.innerWidth/(e/t)/defaultFontSize*100+"%;}}",o="@media screen and (min-width: "+window.innerHeight+"px) {html{font-size:"+window.innerHeight/(e/t)/defaultFontSize*100+"%;}}";i.innerHTML=d+o,n.appendChild(i)}getDefaultFS(),adapt(750,100),window.addEventListener("resize",function(){adapt(750,100)})</script><link href="static/css/entry.min.css?4bff3e4e5c13dfeab650" rel="stylesheet"></head><style>.hori .toolbar-hb-tb{font-size:13px}.show-tips:before{background:red;width:.1rem;height:.1rem;border-radius:.1rem;content:"";display:block;position:absolute;right:0;top:10%}</style><body><div id="app" style="opacity:0" :class="appClass"><load></load><div id="app-body"><app-header :list="list.headers" v-model="target.headerIndex"><div class="header-toolbar flex-row" v-show="target.headerIndex==0"><span class="flex-item" @click="target.realTab=item.value" v-for="item in list.realTabs" v-html="item.name" :class="{active:target.realTab==item.value}"></span></div></app-header><div class="body"><mask-box class="body-aside" v-model="flag.showInput"><div class="body-aside-box body-aside-input"><div class="mb"><input v-model.lazy="param.operate.input"></div><div><button class="button" v-html="btnConfirmText" @click="actConfirm"></button></div></div></mask-box><mask-box class="body-aside" v-model="flag.showAside"><div class="body-aside-box"><div class="badge-box"><p class="title">渠道：</p><div><span class="badge" v-for="item in channels" v-html="item.text" @click="changeStatus(&quot;channel&quot;,true)"></span></div></div><div class="badge-box"><p class="title">子渠道：</p><div><span class="badge" v-for="item in subChannels" v-html="item.text" @click="changeStatus(&quot;channel&quot;,true)"></span></div></div><div class="badge-box"><p class="title">游戏：</p><div><span class="badge" v-for="item in games" v-html="item.text" @click="changeStatus(&quot;game&quot;,true)"></span></div></div><div class="badge-box"><p class="title">子游戏：</p><div><span class="badge" v-for="item in subGames" v-html="item.text" @click="changeStatus(&quot;game&quot;,true)"></span></div></div><div class="badge-box" v-show="param.search.site"><p class="title">子站：</p><div><span class="badge" v-html="param.search.site" @click="changeStatus(&quot;site&quot;,true)"></span></div></div><div class="input-group"><input placeholder="请输入配置名" v-model.lazy="param.local.name"> <button class="button" @click="saveLocal">保存</button></div><div class="badge-box" v-show="list.locals.length&gt;0" style="border-bottom:0"><div><div class="badge full-w" v-for="(item,index) in list.locals" v-if="item" @click="resetParam(item.setting)"><span v-html="item.name"></span><span class="iconfont icon-close-circle fl-right" @click.stop="removeLocal(index)"></span></div></div></div></div></mask-box><div class="body-header"><span class="iconfont icon-param" @click="flag.showAside=true">条件项</span></div><div class="body-content" ref="bodyContent"><div class="full-h" v-show="flag.isQuery" style="position:relative;padding-top:.6rem"><div class="toolbar-hb-tb" style="min-height:.5rem;line-height:.5rem;position:absolute;left:0;right:0;top:0" v-show="target.headerIndex==0"><p v-show="target.realTab=='popup'">环比：<span v-html="ratePost(table.popup.hb)" :class="rateClass(table.popup.hb)"></span> 同比：<span v-html="ratePost(table.popup.tb)" :class="rateClass(table.popup.tb)"></span></p><p v-show="target.realTab=='active'">环比：<span v-html="ratePost(table.active.hb)" :class="rateClass(table.active.hb)"></span> 同比：<span v-html="ratePost(table.active.tb)" :class="rateClass(table.active.tb)"></span></p><p v-show="target.realTab=='reg'">环比：<span v-html="ratePost(table.reg.hb)" :class="rateClass(table.reg.hb)"></span> 同比：<span v-html="ratePost(table.reg.tb)" :class="rateClass(table.reg.tb)"></span></p></div><div style="position:absolute;left:0;top:-.05rem;z-index:2" v-show="target.headerIndex==1&&hasOperateRows"><span>状态：</span><span class="badge" :class="{'clr-active':param.operate.status==0}" @click="actOperateStatus(0)">所有</span><span class="badge" :class="{'clr-active':param.operate.status==1}" @click="actOperateStatus(1)">开启</span><span class="badge" :class="{'clr-active':param.operate.status==-1}" @click="actOperateStatus(-1)">关闭</span> <span style="cursor:pointer" @click="doQueryLog" :class="{'show-tips':flag.hasNewLog}">操作日志</span></div><div class="full-h" ref="content"><div v-show="target.headerIndex==1"><detail-table :td-class="detailTdClass" :headers="detailHeadersFormat" :rows="detailRowsFormat" fixed="1" :height="table.height" :header-list="detailHeaderRows" :status="param.operate.status" :status-fn="doStatus" @input-show="actInput"></detail-table></div><div v-show="target.headerIndex==0"><div v-show="target.realTab=='popup'"><ts-table :headers="table.popup.header" :rows="popupRows" fixed="1" :height="table.height" :header-list="popupHeaderRows"></ts-table></div><div v-show="target.realTab=='active'"><ts-table :headers="table.active.header" :rows="activeRows" fixed="1" :height="table.height" :header-list="activeHeaderRows"></ts-table></div><div v-show="target.realTab=='reg'"><ts-table :headers="table.reg.header" :rows="regRows" fixed="1" :height="table.height" :header-list="regHeaderRows"></ts-table></div><div v-show="target.realTab=='real'"><div class="flex-row frame-box"><div class="flex-item frame-item" @click="target.realFrame='popup'" :class="{active:target.realFrame=='popup'}"><p class="title">弹窗数</p><p v-html="chart.popup.sum"></p><p>环比：<span v-html="ratePost(chart.popup.hb)" :class="rateClass(table.popup.hb)"></span></p><p>同比：<span v-html="ratePost(chart.popup.tb)" :class="rateClass(table.popup.tb)"></span></p></div><div class="flex-item frame-item" @click="target.realFrame='active'" :class="{active:target.realFrame=='active'}"><p class="title">激活数</p><p v-html="chart.active.sum"></p><p>环比：<span v-html="ratePost(chart.active.hb)" :class="rateClass(table.active.hb)"></span></p><p>同比：<span v-html="ratePost(chart.active.tb)" :class="rateClass(table.active.tb)"></span></p></div><div class="flex-item frame-item" @click="target.realFrame='reg'" :class="{active:target.realFrame=='reg'}"><p class="title">注册数</p><p v-html="chart.reg.sum"></p><p>环比：<span v-html="ratePost(chart.reg.hb)" :class="rateClass(table.reg.hb)"></span></p><p>同比：<span v-html="ratePost(chart.reg.tb)" :class="rateClass(table.reg.tb)"></span></p></div></div><div><chart type="line" chart-extend :chart-options="realChart" :style="{height:table.height/2+'px','transform':'translateY(20%)'}"></chart></div></div></div></div></div><div class="empty" v-show="!flag.isQuery"><i class="iconfont icon-empty"></i> 请选择好渠道，游戏，子站查询</div></div><div class="body-footer"><div><button class="button" @click="actQuery">查询</button></div></div></div><calendar v-model="status.calendar" @change="setDate" range :validate-fn="validateDate"></calendar><mask-box v-model="status.date"><div class="toolbar-date"><ul><li class="date-item" @click="chooseDate(-1,-1)">昨天</li><li class="date-item" @click="chooseDate(0)">当天</li><li class="date-item" @click="chooseDate(-2)">最近3天</li><li class="date-item" @click="chooseDate(-7)">最近8天</li><li class="date-item" @click="changeStatus('calendar',true)">自定义</li></ul></div></mask-box><modal class="setting-modal" title="请选择渠道" v-model="status.channel" @show="cloneParam('modal','search','channel')" @ok="cloneParam('search','modal','channel')"><search-plus-list v-model="param.modal.channel"></search-plus-list></modal><modal class="setting-modal" title="请选择游戏" v-model="status.game" @show="cloneParam('modal','search','game')" @ok="cloneParam('search','modal','game')"><search-plus-list placeholder="请输入游戏名" url="/index.php?c=xzl&amp;a=game_list" sub-url="/index.php?c=xzl&amp;a=c_game_list" sub-field="game_id" v-model="param.modal.game"></search-plus-list></modal><modal title="请选择子站" v-model="status.site" @show="cloneParam('modal','search','site')" @ok="cloneParam('search','modal','site')"><div class="search-box"><div class="search-input-box"><input class="search-input" placeholder="请输入子站名" v-model="param.modal.site"></div><div class="search-list" v-show="list.uids.length"><div class="list-item">最近常用</div><div class="list-item" v-for="item in list.uids" v-html="item" @click="param.search.site=item;status.site=false;"></div></div></div></modal><modal v-model="status.setting" @show="cloneParam('modal','setting','currentTab'),cloneParam('modal','setting','columns')" @ok="doSetSetting"><div class="font-strong">默认首页</div><div class="flex-row flex-wrap"><div class="setting-item" v-for="item in list.tabs"><span v-html="item.name" :class="{'clr-active':item.value==param.modal.currentTab}" @click="param.modal.currentTab=item.value"></span></div></div><div v-show="target.headerIndex==1"><div class="font-strong">自定义列</div><div class="setting-group"><span>维度列</span> <span class="iconfont icon-check-full pl" :class="{'clr-active':dimColumnsCheckAll}" @click="toggleCheckColumns(list.columns.slice(4,10),!dimColumnsCheckAll)">&nbsp;所有</span></div><div class="flex-row flex-wrap"><div class="setting-item" v-for="item in list.columns.slice(4,10)"><span v-html="item.label" :class="{'clr-active':param.modal.columns[item.key]}" @click="toggleCheck(param.modal.columns,item.key)"></span></div></div><div class="setting-group"><span>数据列</span><span class="iconfont icon-check-full pl" :class="{'clr-active':dataColumnsCheckAll}" @click="toggleCheckColumns(list.columns.slice(10),!dataColumnsCheckAll)">&nbsp;所有</span></div><div class="flex-row flex-wrap"><div class="setting-item" v-for="item in list.columns.slice(10)"><span v-html="item.label" :class="{'clr-active':param.modal.columns[item.key]}" @click="toggleCheck(param.modal.columns,item.key)"></span></div></div></div></modal><modal v-model="status.log" hide-footer><ts-table :headers="table.logs.headers" :rows="table.logs.rows" :height="table.height" fixed="1"></ts-table></modal><app-footer :list="list.footers"></app-footer></div></div><script>var APP=["xzl/entry"]</script><script>var requirejs={baseUrl:"./static/js/app/",urlArgs:"20181123"}</script><script src="static/js/lib/require.js"></script><script type="text/javascript" src="static/js/entry.min.js?4bff3e4e5c13dfeab650"></script></body></html>